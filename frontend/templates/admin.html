<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel | Hidden Local</title>
    <link rel="stylesheet" href="../static/css/style.css">
</head>
<body>

<h2 style="text-align:center">Admin Approval Panel</h2>

<div id="pendingList" style="max-width:600px;margin:auto"></div>

<script>
fetch("http://127.0.0.1:5000/admin/pending")
  .then(res => res.json())
  .then(data => {
      const container = document.getElementById("pendingList");

      data.forEach(v => {
          const div = document.createElement("div");
          div.style.border = "1px solid #ccc";
          div.style.padding = "10px";
          div.style.marginBottom = "10px";

          div.innerHTML = `
            <h3>${v.name}</h3>
            <p>${v.description}</p>
            <button onclick="approve(${v.id})">Approve</button>
            <button onclick="reject(${v.id})">Reject</button>
          `;
          container.appendChild(div);
      });
  });

function approve(id) {
    fetch(`http://127.0.0.1:5000/admin/approve/${id}`, { method: "POST" })
      .then(() => location.reload());
}

function reject(id) {
    fetch(`http://127.0.0.1:5000/admin/reject/${id}`, { method: "POST" })
      .then(() => location.reload());
}
</script>

</body>
</html>
